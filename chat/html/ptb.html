<!DOCTYPE html>
<html>

<head>
    <link rel="icon" href="https://www.moosen.im/favicon.ico">
    <meta charset="utf-8">
    <title>Periodic Table of Business</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
    <script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.2.0.js"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="./html/todomodal.html" rel="import" />
</head>

<body>

</body>
<div ng-app="app" ng-controller="ctrl" class="modal-demo">
    <div>
        <button ng-repeat="x in elements" ng-click="openModal(x)"> {{x.name}}</button>
    </div>
</div>
<button class="btn" ng-click="open()">Open Modal</button>

  <div modal="showModal" close="cancel()">
    <div class="modal-header">
        <h4>Modal Dialog</h4>
    </div>
    <div class="modal-body">
        <p>Example paragraph with some text.</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-success" ng-click="ok()">Okay</button>
      <button class="btn" ng-click="cancel()">Cancel</button>
    </div>
  </div>
<script>
    var app = angular.module('app', ['ui.bootstrap'])

    $scope.open = function() {
      $scope.showModal = true;
    };

    $scope.ok = function() {
      $scope.showModal = false;
    };

    $scope.cancel = function() {
      $scope.showModal = false;
    };

    app.controller('ctrl', function($scope, $timeout, $dialog) {
        $scope.elements = [{
                name: '1',
                content: 'test content'
            },
            {
                name: '2',
                content: 'test content'
            },
            {
                name: '3',
                content: 'test content'
            }
        ]
        var dialogOptions = {
            controller: 'modalCtrl',
            templateUrl: './html/elementmodal.html'
        };

        $scope.openModal = function openModal(x) {
            var modalInfo = x
            console.log(modalInfo)
            $dialog.dialog({})
                .open('./html/elementmodal.html',function (){
                    console.log('hello open')
                    $scope.modalInfo = x
                    $scope.modalContent = x
                    angular.copy(modalInfo,res)
                })
                .then(function(res) {
                    if (res) {
                        angular.copy(modalInfo,res)
                        console.log('res called')
                    }
                    else{
                        console.log('res no worky')
                        angular.copy(modalInfo,res)
                    }
                    console.log('set to null')
                    modalInfo = null
                })

            //    $dialog.dialog({}).open('./html/elementmodal.html')
            //    console.log($scope.modalinfo)
            //    }
        }
    })

    function modalCtrl($scope, item, dialog) {

        $scope.item = item

        $scope.save = function() {
            dialog.close($scope.item)
        }

        $scope.close = function() {
            dialog.close(undefined)
        }
    }
</script>

</body>


</html>
